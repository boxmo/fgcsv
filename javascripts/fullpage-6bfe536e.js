/*!
 * jQuery Scrollify
 * Version 1.0.14
 *
 * Requires:
 * - jQuery 1.7 or higher
 *
 * https://github.com/lukehaas/Scrollify
 *
 * Copyright 2016, Luke Haas
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.



if touchScroll is false - update index

 */
(function(e,t){"use strict";typeof define=="function"&&define.amd?define(["jquery"],function(n){return t(n,e,e.document)}):typeof module=="object"&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)})(typeof window!="undefined"?window:this,function(e,t,n,r){"use strict";function O(n,r,a,c){f===n&&(a=!1);if(S===!0)return!0;if(s[n]){m=!1,a&&A.before(n,o),l=1,k=i[n],N===!1&&f>n&&c===!1&&u[n]&&(l=parseInt(o[n].outerHeight()/d.height()),k=parseInt(i[n])+(o[n].outerHeight()-d.height()));if(A.updateHash&&A.sectionName&&(N!==!0||n!==0))if(history.pushState)try{history.replaceState(null,null,s[n])}catch(h){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=s[n];N&&(A.afterRender(),N=!1),f=n;if(r)e(A.target).stop().scrollTop(k),a&&A.after(n,o);else{g=!0,e().velocity?e(A.target).stop().velocity("scroll",{duration:A.scrollSpeed,easing:A.easing,offset:k,mobileHA:!1}):e(A.target).stop().animate({scrollTop:k},A.scrollSpeed,A.easing);if(t.location.hash.length&&A.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(h){}e(A.target).promise().done(function(){g=!1,N=!1,a&&A.after(n,o)})}}}function M(e){function t(t){var n=0,r=e.slice(Math.max(e.length-t,1));for(var i=0;i<r.length;i++)n+=r[i];return Math.ceil(n/t)}var n=t(10),r=t(70);return n>=r?!0:!1}function D(e,t){var n=s.length;for(;n>=0;n--)typeof e=="string"?s[n]===e&&(a=n,O(n,t,!0,!0)):n===e&&(a=n,O(n,t,!0,!0))}var i=[],s=[],o=[],u=[],a=0,f=0,l=1,c=!1,h,p,d=e(t),v=d.scrollTop(),m=!1,g=!1,y=!1,b,w,E,S=!1,x=[],T=(new Date).getTime(),N=!0,C=!1,k=0,L="onwheel"in n?"wheel":n.onmousewheel!==r?"mousewheel":"DOMMouseScroll",A={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},_=function(r){function f(t){e().velocity?e(A.target).stop().velocity("scroll",{duration:A.scrollSpeed,easing:A.easing,offset:t,mobileHA:!1}):e(A.target).stop().animate({scrollTop:t},A.scrollSpeed,A.easing)}function N(t){t&&(v=d.scrollTop());var n=A.section;u=[],A.interstitialSection.length&&(n+=","+A.interstitialSection),A.scrollbars===!1&&(A.overflowScroll=!1),e(n).each(function(t){var n=e(this);A.setHeights?n.is(A.interstitialSection)?u[t]=!1:n.css("height","auto").outerHeight()<d.height()||n.css("overflow")==="hidden"?(n.css({height:d.height()}),u[t]=!1):(n.css({height:n.height()}),A.overflowScroll?u[t]=!0:u[t]=!1):n.outerHeight()<d.height()||A.overflowScroll===!1?u[t]=!1:u[t]=!0}),t&&d.scrollTop(v)}function k(n,r){var u=A.section;A.interstitialSection.length&&(u+=","+A.interstitialSection),i=[],s=[],o=[],e(u).each(function(n){var r=e(this);n>0?i[n]=parseInt(r.offset().top)+A.offset:i[n]=parseInt(r.offset().top),A.sectionName&&r.data(A.sectionName)?s[n]="#"+r.data(A.sectionName).toString().replace(/ /g,"-"):r.is(A.interstitialSection)===!1?s[n]="#"+(n+1):(s[n]="#",n===e(u).length-1&&n>1&&(i[n]=i[n-1]+(parseInt(e(e(u)[n-1]).outerHeight())-parseInt(e(t).height()))+parseInt(r.outerHeight()))),o[n]=r;try{e(s[n]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(f){}t.location.hash===s[n]&&(a=n,c=!0)}),!0===n&&O(a,!1,!1,!1)}function _(){return u[a]?(v=d.scrollTop(),v>parseInt(i[a])?!1:!0):!0}function D(){return u[a]?(v=d.scrollTop(),v<parseInt(i[a])+(o[a].outerHeight()-d.height())-28?!1:!0):!0}C=!0,e.easing.easeOutExpo=function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},b={handleMousedown:function(){if(S===!0)return!0;m=!1,y=!1},handleMouseup:function(){if(S===!0)return!0;m=!0,y&&b.calculateNearest(!1,!0)},handleScroll:function(){if(S===!0)return!0;h&&clearTimeout(h),h=setTimeout(function(){y=!0;if(m===!1)return!1;m=!1},200)},calculateNearest:function(e,t){v=d.scrollTop();var n=1,r=i.length,s=0,o=Math.abs(i[0]-v),u;for(;n<r;n++)u=Math.abs(i[n]-v),u<o&&(o=u,s=n);if(D()&&s>a||_())a=s,O(s,e,t,!1)},wheelHandler:function(n){if(S===!0)return!0;if(A.standardScrollElements)if(e(n.target).is(A.standardScrollElements)||e(n.target).closest(A.standardScrollElements).length)return!0;u[a]||n.preventDefault();var r=(new Date).getTime();n=n||t.event;var s=n.originalEvent.wheelDelta||-n.originalEvent.deltaY||-n.originalEvent.detail,o=Math.max(-1,Math.min(1,s));x.length>149&&x.shift(),x.push(Math.abs(s)),r-T>200&&(x=[]),T=r;if(g)return!1;if(o<0){if(a<i.length-1&&D()){if(!M(x))return!1;n.preventDefault(),a++,g=!0,O(a,!1,!0,!1)}}else if(o>0&&a>0&&_()){if(!M(x))return!1;n.preventDefault(),a--,g=!0,O(a,!1,!0,!1)}},keyHandler:function(e){if(S===!0)return!0;if(g===!0)return!1;e.keyCode==38||e.keyCode==33?a>0&&_()&&(e.preventDefault(),a--,O(a,!1,!0,!1)):(e.keyCode==40||e.keyCode==34)&&a<i.length-1&&D()&&(e.preventDefault(),a++,O(a,!1,!0,!1))},init:function(){A.scrollbars?(d.on("mousedown",b.handleMousedown),d.on("mouseup",b.handleMouseup),d.on("scroll",b.handleScroll)):e("body").css({overflow:"hidden"}),d.on(L,b.wheelHandler),d.on("keydown",b.keyHandler)}},w={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(S===!0)return!0;if(A.standardScrollElements)if(e(t.target).is(A.standardScrollElements)||e(t.target).closest(A.standardScrollElements).length)return!0;var n;if(typeof t!="undefined"&&typeof t.touches!="undefined"){n=t.touches[0];switch(t.type){case"touchstart":w.touches.touchstart.y=n.pageY,w.touches.touchmove.y=-1,w.touches.touchstart.x=n.pageX,w.touches.touchmove.x=-1,w.options.timeStamp=(new Date).getTime(),w.touches.touchend=!1;case"touchmove":w.touches.touchmove.y=n.pageY,w.touches.touchmove.x=n.pageX,w.touches.touchstart.y!==w.touches.touchmove.y&&Math.abs(w.touches.touchstart.y-w.touches.touchmove.y)>Math.abs(w.touches.touchstart.x-w.touches.touchmove.x)&&(t.preventDefault(),w.touches.direction="y",w.options.timeStamp+w.options.timeGap<(new Date).getTime()&&w.touches.touchend==0&&(w.touches.touchend=!0,w.touches.touchstart.y>-1&&Math.abs(w.touches.touchmove.y-w.touches.touchstart.y)>w.options.distance&&(w.touches.touchstart.y<w.touches.touchmove.y?w.up():w.down())));break;case"touchend":w.touches[t.type]===!1&&(w.touches[t.type]=!0,w.touches.touchstart.y>-1&&w.touches.touchmove.y>-1&&w.touches.direction==="y"&&(Math.abs(w.touches.touchmove.y-w.touches.touchstart.y)>w.options.distance&&(w.touches.touchstart.y<w.touches.touchmove.y?w.up():w.down()),w.touches.touchstart.y=-1,w.touches.touchstart.x=-1,w.touches.direction="undetermined"));default:}}},down:function(){a<i.length-1&&(D()&&a<i.length-1?(a++,O(a,!1,!0,!1)):Math.floor(o[a].height()/d.height())>l?(f(parseInt(i[a])+d.height()*l),l+=1):f(parseInt(i[a])+(o[a].outerHeight()-d.height())))},up:function(){a>=0&&(_()&&a>0?(a--,O(a,!1,!0,!1)):l>2?(l-=1,f(parseInt(i[a])+d.height()*l)):(l=1,f(parseInt(i[a]))))},init:function(){n.addEventListener&&A.touchScroll&&(n.addEventListener("touchstart",w.touchHandler,!1),n.addEventListener("touchmove",w.touchHandler,!1),n.addEventListener("touchend",w.touchHandler,!1))}},E={refresh:function(e,t){clearTimeout(p),p=setTimeout(function(){N(!0),k(t,!1),e&&A.afterResize()},400)},handleUpdate:function(){E.refresh(!1,!1)},handleResize:function(){E.refresh(!0,!1)},handleOrientation:function(){E.refresh(!0,!0)}},A=e.extend(A,r),N(!1),k(!1,!0),!0===c?O(a,!1,!0,!0):setTimeout(function(){b.calculateNearest(!0,!1)},200),i.length&&(b.init(),w.init(),d.on("resize",E.handleResize),n.addEventListener&&t.addEventListener("orientationchange",E.handleOrientation,!1))};return _.move=function(t){if(t===r)return!1;t.originalEvent&&(t=e(this).attr("href")),D(t,!1)},_.instantMove=function(e){if(e===r)return!1;D(e,!0)},_.next=function(){a<s.length&&(a+=1,O(a,!1,!0,!0))},_.previous=function(){a>0&&(a-=1,O(a,!1,!0,!0))},_.instantNext=function(){a<s.length&&(a+=1,O(a,!0,!0,!0))},_.instantPrevious=function(){a>0&&(a-=1,O(a,!0,!0,!0))},_.destroy=function(){if(!C)return!1;A.setHeights&&e(A.section).each(function(){e(this).css("height","auto")}),d.off("resize",E.handleResize),A.scrollbars&&(d.off("mousedown",b.handleMousedown),d.off("mouseup",b.handleMouseup),d.off("scroll",b.handleScroll)),d.off(L,b.wheelHandler),d.off("keydown",b.keyHandler),n.addEventListener&&A.touchScroll&&(n.removeEventListener("touchstart",w.touchHandler,!1),n.removeEventListener("touchmove",w.touchHandler,!1),n.removeEventListener("touchend",w.touchHandler,!1)),i=[],s=[],o=[],u=[]},_.update=function(){if(!C)return!1;E.handleUpdate()},_.current=function(){return o[a]},_.disable=function(){S=!0},_.enable=function(){S=!1},_.isDisabled=function(){return S},_.setOptions=function(n){if(!C)return!1;typeof n=="object"?(A=e.extend(A,n),E.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object.")},e.scrollify=_,_});